#!/bin/bash
#set beggining variables
#set yes or no to yes so that it will default to thinking you want to download something
YORN='y'
#make this your first url on start
LINKS=0
#check the condition passed (if -a it will ask for aliases
if [ "$1" = '-a' ]
then
    cd ~/.config/easydl/
    lines=$(wc -l aliases.sh)
    lines=${lines/aliases.sh/}
    if [ $lines -gt 1 ]
    then
        numberofaliases=$(( 1 + ( $lines - 10 ) / 2 ))
    else
        numberofaliases=0
    fi
    read -p 'what do you want this alias to be named? (no spaces)> ' name
    read -p 'where do you want it to point? use the same syntax as if you were passing cd then this text from the home directory-> ' adirectory
    echo 'name'"$numberofaliases"'='"'""$name""'" >> aliases.sh
    echo 'directory'"$numberofaliases"'='"'""$adirectory""'" >> aliases.sh
elif [ "$1" = '-al' ]
then
    echo "your aliases are listed after all of the things being listed as nothing"
    echo "ctrl x to exit nano (the text editor)"
    sleep 5
    nano ~/.config/easydl/aliases.sh
elif [ "$1" = '-y' ]
then
	echo "opening nano so you can edit the youtube commands"
	sleep 4
	nano ~/.config/easydl/youtube_commands.sh
else
    while [ "${YORN}" = 'y' ]
    do
        echo 'video (mp4) or audio (mp3)'
        read -p 'video or audio> ' format
        echo 'what url?'
        read -p 'paste url here (ctrl shift v)> ' url
        if [ $LINKS -gt 0 ]
        then
            echo 'same directory as before?'
            read -p 'y or n> ' yesorno
            if [ "${yesorno}" = 'n' ]
            then
                echo 'where do you want it?'
                read -p 'directory> ' place
                source ~/.config/easydl/aliases.sh
                if [ "${place}" = "$name1" ]
                then
                    realplace="$directory1"
                    cd ~
                    cd $directory1
                elif [ "${place}" = "$name2" ]
                then
                    realplace="$directory2"
                    cd ~
                    cd $directory2
                elif [ "${place}" = "$name3" ]
                then
                    realplace="$directory3"
                    cd ~
                    cd $directory3
                elif [ "${place}" = "$name4}" ]
                then
                    realplace="$directory4"
                    cd ~
                    cd $directory4
                elif [ "${place}" = "${name5}" ]
                then
                    realplace="$directory5"
                    cd ~
                    cd $directory5
                else
                    realplace="$place"
                    cd ~
                    cd $place
                fi
            fi
        elif [ $LINKS -eq 0 ]
        then
            echo 'where do you want it?'
            read -p 'directory> ' place
            source ~/.config/easydl/aliases.sh
            if [ "${place}" = "$name1" ]
            then
                realplace="$directory1"
                cd ~
                cd $directory1
            elif [ "${place}" = "$name2" ]
            then
                realplace="$directory2"
                cd ~
                cd $directory2
            elif [ "${place}" = "$name3" ]
            then
                realplace="$directory3"
                cd ~
                cd $directory3
            elif [ "${place}" = "$name4}" ]
            then
                realplace="$directory4"
                cd ~
                cd $directory4
            elif [ "${place}" = "${name5}" ]
            then
                realplace="$directory5"
                cd ~
                cd $directory5
            else
                realplace="$place"
                cd ~
                cd $place
            fi
        fi
		echo ""
		echo ""
        echo 'Downloading '$url' as a(n) '$format' file in ~/'$realplace
        sleep 5
	clear
		source ~/.config/easydl/youtube_commands.sh
        if [ "${format}" = 'audio' ]
        then
            #right here for audio
            youtubeAUDIO $url
        elif [ "${format}" = 'video' ]
        then
            #and right here for video
            youtubeVIDEO $url
        else
            echo 'that is not understood, please type video or audio only'
        fi
		sleep 5
	echo ""
	echo ""
        echo 'done, do you have more?'
        read -p 'y or n> ' YORN
        if [ "${YORN}" = 'y' ]
        then
            ((LINKS=LINKS+1))
        fi
    done
	echo ""
    echo 'have a nice day :)'
fi
exit
